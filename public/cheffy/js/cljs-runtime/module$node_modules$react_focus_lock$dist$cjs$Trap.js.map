{
"version":3,
"file":"module$node_modules$react_focus_lock$dist$cjs$Trap.js",
"lineCount":9,
"mappings":"AAAAA,cAAA,mDAAA,CAAuE,QAAQ,CAACC,MAAD,CAAQC,OAAR,CAAgBC,MAAhB,CAAuBC,OAAvB,CAAgC,CAwD/GC,QAASA,UAAS,CAACC,UAAD,CAAaC,GAAb,CAAkBC,IAAlB,CAAwBC,QAAxB,CAAkC,CAClD,IAAIC,UAAY,IAAhB,CACIC,EAAIL,UAER,GAAG,CACD,IAAIM,KAAOH,QAAA,CAASE,CAAT,CAEX,IAAIC,IAAAC,MAAJ,CACMD,IAAAE,KAAAC,QAAAC,eAAJ,GACEN,SADF,CACcE,IADd,CADF,KAIO,IAAIA,IAAAK,SAAJ,CAAmB,CACxB,GAAIN,CAAJ,GAAUL,UAAV,CAEE,MAGFI,UAAA,CAAY,IANY,CAAnB,IAQL,MAfD,CAAH,OAiBUC,CAjBV,EAiBeH,IAjBf,IAiByBD,GAjBzB,CAmBIG,UAAJ,GACEA,SAAAI,KAAAI,SADF,CAC4B,CAD5B,CAvBkD,CArDhDC,MAAAA,CAA0BjB,OAAA,CAAQ,mEAAR,CAE1BkB,OAAAA;AAAyBlB,OAAA,CAAQ,kEAAR,CAE7BmB,OAAAC,eAAA,CAAsBlB,OAAtB,CAA+B,YAA/B,CAA6C,CAC3CmB,MAAO,CAAA,CADoC,CAA7C,CAGAnB,QAAAoB,QAAA,CAAkBpB,OAAAqB,QAAlB,CAAoCrB,OAAAsB,OAApC,CAAqD,IAAK,EAE1D,KAAIC,oBAAsBP,MAAA,CAAuBlB,OAAA,CAAQ,8DAAR,CAAvB,CAEbkB,OAAA,CAAuBlB,OAAA,CAAQ,iCAAR,CAAvB,CAEIkB,OAAA,CAAuBlB,OAAA,CAAQ,sCAAR,CAAvB,CAEb0B,OAAAA,CAAyBR,MAAA,CAAuBlB,OAAA,CAAQ,uDAAR,CAAvB,CAE7B,KAAI2B,WAAaV,MAAA,CAAwBjB,OAAA,CAAQ,+CAAR,CAAxB,CAAjB;AAEI4B,MAAQ5B,OAAA,CAAQ,oDAAR,CAFZ,CAYI6B,eAAiB,IAZrB,CAaIC,gBAAkB,IAbtB,CAcIC,oBAAsB,IAd1B,CAeIC,sBAAwB,CAAA,CAf5B,CAiBIC,iBAAmBA,QAAyB,EAAG,CACjD,MAAO,CAAA,CAD0C,CAjBnD,CAgEIC,WAAaA,QAAmB,CAACC,GAAD,CAAM,CACxC,MAAOA,IAAA,EAAO,SAAP,EAAoBA,IAApB,CAA0BA,GAAAC,QAA1B,CAAwCD,GADP,CAhE1C,CAoEIE,aAAeA,QAAqB,EAAG,CACzC,IAAIC,OAAS,CAAA,CAEb,IAAIT,cAAJ,CAAoB,CAAA,IACdU,gBAAkBV,cADJ,CAGdW,gBAAkBD,eAAAC,gBAHJ,CAIdC,UAAYF,eAAAE,UAJE,CAKdC,OAASH,eAAAG,OACTC,gBAAAA,CAJWJ,eAAAK,SAIXD;AAA0BZ,mBAA1BY,EAAiDZ,mBAAAc,gBACrD,KAAIC,cAAgBC,QAAhBD,EAA4BC,QAAAD,cAEhC,IAAIH,eAAJ,CAAiB,CACXK,MAAAA,CAAc,CAACL,eAAD,CAAAM,OAAA,CAAqB,CAAC,CAAA,CAAGxB,mBAAAH,QAAJ,EAAiCoB,MAAAQ,IAAA,CAAWhB,UAAX,CAAAiB,OAAA,CAA8BC,OAA9B,CAAjC,CAArB,CAElB,IAAI,CAACN,aAAL,EA7DG,CAACjB,cAAAwB,UAAD,EAA6BpB,gBAA7B,EA6DoCa,aA7DpC,CA6DH,CACE,GAAIN,eAAJ,EAAuBR,qBAAvB,EA3EC,EAJAe,QAIA,EAJYA,QAAAD,cAIZ,GAJuCC,QAAAO,KAIvC,EAAiB,CAAC,CAAA,CAAG3B,UAAA4B,cAAJ,GAAjB,CA2ED,EAAkE,CAACzB,eAAnE,EAAsFW,SAAtF,CACME,CAAAA,eAWJ,EAXqB,CAAC,CAAA,CAAGhB,UAAA6B,YAAJ,EAA4BR,MAA5B,CAWrB;AA/DDjB,mBA+DC,EA/DsBA,mBAAAc,gBA+DtB,GAXqFC,aAWrF,GAVMC,QAAJ,EAAgB,CAACjB,eAAjB,EAAoCgB,aAApC,EAAqD,CAACL,SAAtD,EACEK,aAAAW,KAAA,EACA,CAAAV,QAAAO,KAAAI,MAAA,EAFF,GAIEpB,MACA,CADS,CAAC,CAAA,CAAGX,UAAAL,QAAJ,EAAwB0B,MAAxB,CAAqClB,eAArC,CACT,CAAAC,mBAAA,CAAsB,EALxB,CAUF,EADAC,qBACA,CADwB,CAAA,CACxB,CAAAF,eAAA,CAAkBiB,QAAlB,EAA8BA,QAAAD,cAIlC,IAAIC,QAAJ,CAAc,CACZ,IAAIY,iBAAmBZ,QAAnBY,EAA+BZ,QAAAD,cAC/BvC,gBAAAA,CAAW,CAAC,CAAA,CAAGoB,UAAAiC,gBAAJ,EAAgCZ,MAAhC,CAMf,IALIa,SAKJ,CALkBtD,eAAAuD,KAAA,CAAc,QAAS,CAACC,IAAD,CAAO,CAE9C,MADWA,KAAAnD,KACX;AAAgB+C,gBAF8B,CAA9B,CAKlB,CAEEpD,eAAA4C,OAAA,CAAgB,QAAS,CAACa,KAAD,CAAQ,CAC/B,IACIpD,KAAOoD,KAAApD,KACX,OAFYoD,MAAArD,MAEZ,EAAgBC,IAAAC,QAAAC,eAHe,CAAjC,CAAAmD,QAAA,CAIW,QAAS,CAACC,KAAD,CAAQ,CAE1B,MADWA,MAAAtD,KACJuD,gBAAA,CAAqB,UAArB,CAFmB,CAJ5B,CAUA,CAFIC,SAEJ,CAFmB7D,eAAA8D,QAAA,CAAiBR,SAAjB,CAEnB,CADA1D,SAAA,CAAUiE,SAAV,CAAwB7D,eAAA+D,OAAxB,CAA0C,CAA1C,CAA6C/D,eAA7C,CACA,CAAAJ,SAAA,CAAUiE,SAAV,CAAyB,EAAzB,CAA6B,EAA7B,CAAgC7D,eAAhC,CApBU,CApBC,CATC,CAuDpB,MAAO+B,OA1DkC,CApE3C,CAiIIiC,OAASA,QAAe,CAACC,KAAD,CAAQ,CAC9BnC,YAAA,EAAJ,EAAsBmC,KAAtB,GAEEA,KAAAC,gBAAA,EACA,CAAAD,KAAAE,eAAA,EAHF,CADkC,CAjIpC,CAyIIlD,OAASA,QAAe,EAAG,CAC7B,MAAO,CAAC,CAAA,CAAGI,KAAA+C,YAAJ,EAAuBtC,YAAvB,CADsB,CAI/BnC;OAAAsB,OAAA,CAAiBA,MAYjBtB,QAAAqB,QAAA,CAVcA,QAAgB,CAACiD,KAAD,CAAQ,CAEpC,IAAII,OAASJ,KAAAK,OACTC,MAAAA,CAAcN,KAAAO,cAEbD,MAAAE,SAAA,CAAqBJ,MAArB,CAAL,GA1HA7C,mBA0HA,CA1HsB,CACpBkD,aA0HaH,KA3HO,CAEpBjC,gBAyH0B+B,MA3HN,CA0HtB,CALoC,CA4BtC,KAAIM,aAAeA,QAAqB,EAAG,CACzClD,qBAAA,CAAwB,CAAA,CADiB,CAmDvCmD,QAAAA,CAAW,CAAC,CAAA,CAAGzD,MAAAJ,QAAJ,EAnCf8D,QAA2B,CAACC,SAAD,CAAY,CACrC,MAAOA,UAAAlC,OAAA,CAAiB,QAAS,CAACmC,KAAD,CAAQ,CAEvC,MAAO,CADQA,KAAAC,SADwB,CAAlC,CAAAC,MAAA,CAGG,EAHH,CAAA,CAGM,CAHN,CAD8B,CAmCxB,CA5BfC,QAAkC,CAACC,IAAD,CAAO,CACnCA,IAAJ,EAAY,CAAC7D,cAAb,GAnBAkB,QAAA4C,iBAAA,CAA0B,SAA1B,CAAqCpB,MAArC,CAA6C,CAAA,CAA7C,CAEA,CADAxB,QAAA4C,iBAAA,CAA0B,UAA1B,CAAsCnE,MAAtC,CACA;AAAAoE,MAAAD,iBAAA,CAAwB,MAAxB,CAAgCT,YAAhC,CAiBA,CAIA,KAAIW,SAAWhE,cAAf,CACIiE,SAAWD,QAAXC,EAAuBJ,IAAvBI,EAA+BJ,IAAAK,aAA/BD,GAAqDD,QAAAE,aACzDlE,eAAA,CAAiB6D,IAEjB,IAAIG,QAAJ,EAAgB,CAACC,QAAjB,CACED,QAAAG,eAAA,EAGF,IAAIN,IAAJ,CAAU,CACR5D,eAAA,CAAkB,IAElB,IAAI,CAACgE,QAAL,EAAiBD,QAAAjD,SAAjB,GAAuC8C,IAAA9C,SAAvC,CACE8C,IAAAK,aAAA,EAGF1D,aAAA,CAAa,CAAA,CAAb,CACA,EAAC,CAAA,CAAGT,KAAA+C,YAAJ,EAAuBtC,YAAvB,CARQ,CAAV,IAzBAU,SAAAkD,oBAAA,CAA6B,SAA7B,CAAwC1B,MAAxC,CAAgD,CAAA,CAAhD,CAoCE,CAnCFxB,QAAAkD,oBAAA,CAA6B,UAA7B,CAAyCzE,MAAzC,CAmCE,CAlCFoE,MAAAK,oBAAA,CAA2B,MAA3B,CAAmCf,YAAnC,CAkCE;AAAApD,eAAA,CAAkB,IAxBmB,CA4B1B,CAAA,CAnEIoE,QAAqB,EAAG,CACzC,MAAO,KADkC,CAmE5B,CAEfhG,QAAAoB,QAAA,CAAkB6D,OApP6F;",
"sources":["node_modules/react-focus-lock/dist/cjs/Trap.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$react_focus_lock$dist$cjs$Trap\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.onFocus = exports.onBlur = void 0;\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _reactClientsideEffect = _interopRequireDefault(require(\"react-clientside-effect\"));\n\nvar _focusLock = _interopRequireWildcard(require(\"focus-lock\"));\n\nvar _util = require(\"./util\");\n\nvar focusOnBody = function focusOnBody() {\n  return document && document.activeElement === document.body;\n};\n\nvar isFreeFocus = function isFreeFocus() {\n  return focusOnBody() || (0, _focusLock.focusIsHidden)();\n};\n\nvar lastActiveTrap = null;\nvar lastActiveFocus = null;\nvar lastPortaledElement = null;\nvar focusWasOutsideWindow = false;\n\nvar defaultWhitelist = function defaultWhitelist() {\n  return true;\n};\n\nvar focusWhitelisted = function focusWhitelisted(activeElement) {\n  return (lastActiveTrap.whiteList || defaultWhitelist)(activeElement);\n};\n\nvar recordPortal = function recordPortal(observerNode, portaledElement) {\n  lastPortaledElement = {\n    observerNode: observerNode,\n    portaledElement: portaledElement\n  };\n};\n\nvar focusIsPortaledPair = function focusIsPortaledPair(element) {\n  return lastPortaledElement && lastPortaledElement.portaledElement === element;\n};\n\nfunction autoGuard(startIndex, end, step, allNodes) {\n  var lastGuard = null;\n  var i = startIndex;\n\n  do {\n    var item = allNodes[i];\n\n    if (item.guard) {\n      if (item.node.dataset.focusAutoGuard) {\n        lastGuard = item;\n      }\n    } else if (item.lockItem) {\n      if (i !== startIndex) {\n        // we will tab to the next element\n        return;\n      }\n\n      lastGuard = null;\n    } else {\n      break;\n    }\n  } while ((i += step) !== end);\n\n  if (lastGuard) {\n    lastGuard.node.tabIndex = 0;\n  }\n}\n\nvar extractRef = function extractRef(ref) {\n  return ref && 'current' in ref ? ref.current : ref;\n};\n\nvar activateTrap = function activateTrap() {\n  var result = false;\n\n  if (lastActiveTrap) {\n    var _lastActiveTrap = lastActiveTrap,\n        observed = _lastActiveTrap.observed,\n        persistentFocus = _lastActiveTrap.persistentFocus,\n        autoFocus = _lastActiveTrap.autoFocus,\n        shards = _lastActiveTrap.shards;\n    var workingNode = observed || lastPortaledElement && lastPortaledElement.portaledElement;\n    var activeElement = document && document.activeElement;\n\n    if (workingNode) {\n      var workingArea = [workingNode].concat((0, _toConsumableArray2.default)(shards.map(extractRef).filter(Boolean)));\n\n      if (!activeElement || focusWhitelisted(activeElement)) {\n        if (persistentFocus || focusWasOutsideWindow || !isFreeFocus() || !lastActiveFocus && autoFocus) {\n          if (workingNode && !((0, _focusLock.focusInside)(workingArea) || focusIsPortaledPair(activeElement, workingNode))) {\n            if (document && !lastActiveFocus && activeElement && !autoFocus) {\n              activeElement.blur();\n              document.body.focus();\n            } else {\n              result = (0, _focusLock.default)(workingArea, lastActiveFocus);\n              lastPortaledElement = {};\n            }\n          }\n\n          focusWasOutsideWindow = false;\n          lastActiveFocus = document && document.activeElement;\n        }\n      }\n\n      if (document) {\n        var newActiveElement = document && document.activeElement;\n        var allNodes = (0, _focusLock.getFocusabledIn)(workingArea);\n        var focusedItem = allNodes.find(function (_ref) {\n          var node = _ref.node;\n          return node === newActiveElement;\n        });\n\n        if (focusedItem) {\n          // remove old focus\n          allNodes.filter(function (_ref2) {\n            var guard = _ref2.guard,\n                node = _ref2.node;\n            return guard && node.dataset.focusAutoGuard;\n          }).forEach(function (_ref3) {\n            var node = _ref3.node;\n            return node.removeAttribute('tabIndex');\n          });\n          var focusedIndex = allNodes.indexOf(focusedItem);\n          autoGuard(focusedIndex, allNodes.length, +1, allNodes);\n          autoGuard(focusedIndex, -1, -1, allNodes);\n        }\n      }\n    }\n  }\n\n  return result;\n};\n\nvar onTrap = function onTrap(event) {\n  if (activateTrap() && event) {\n    // prevent scroll jump\n    event.stopPropagation();\n    event.preventDefault();\n  }\n};\n\nvar onBlur = function onBlur() {\n  return (0, _util.deferAction)(activateTrap);\n};\n\nexports.onBlur = onBlur;\n\nvar onFocus = function onFocus(event) {\n  // detect portal\n  var source = event.target;\n  var currentNode = event.currentTarget;\n\n  if (!currentNode.contains(source)) {\n    recordPortal(currentNode, source);\n  }\n};\n\nexports.onFocus = onFocus;\n\nvar FocusWatcher = function FocusWatcher() {\n  return null;\n};\n\nvar FocusTrap = function FocusTrap(_ref4) {\n  var children = _ref4.children;\n  return _react.default.createElement(\"div\", {\n    onBlur: onBlur,\n    onFocus: onFocus\n  }, children);\n};\n\nFocusTrap.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  children: _propTypes.default.node.isRequired\n} : {};\n\nvar onWindowBlur = function onWindowBlur() {\n  focusWasOutsideWindow = true;\n};\n\nvar attachHandler = function attachHandler() {\n  document.addEventListener('focusin', onTrap, true);\n  document.addEventListener('focusout', onBlur);\n  window.addEventListener('blur', onWindowBlur);\n};\n\nvar detachHandler = function detachHandler() {\n  document.removeEventListener('focusin', onTrap, true);\n  document.removeEventListener('focusout', onBlur);\n  window.removeEventListener('blur', onWindowBlur);\n};\n\nfunction reducePropsToState(propsList) {\n  return propsList.filter(function (_ref5) {\n    var disabled = _ref5.disabled;\n    return !disabled;\n  }).slice(-1)[0];\n}\n\nfunction handleStateChangeOnClient(trap) {\n  if (trap && !lastActiveTrap) {\n    attachHandler();\n  }\n\n  var lastTrap = lastActiveTrap;\n  var sameTrap = lastTrap && trap && trap.onActivation === lastTrap.onActivation;\n  lastActiveTrap = trap;\n\n  if (lastTrap && !sameTrap) {\n    lastTrap.onDeactivation();\n  }\n\n  if (trap) {\n    lastActiveFocus = null;\n\n    if (!sameTrap || lastTrap.observed !== trap.observed) {\n      trap.onActivation();\n    }\n\n    activateTrap(true);\n    (0, _util.deferAction)(activateTrap);\n  } else {\n    detachHandler();\n    lastActiveFocus = null;\n  }\n}\n\nvar _default = (0, _reactClientsideEffect.default)(reducePropsToState, handleStateChangeOnClient)(FocusWatcher);\n\nexports.default = _default;\n};"],
"names":["shadow$provide","global","require","module","exports","autoGuard","startIndex","end","step","allNodes","lastGuard","i","item","guard","node","dataset","focusAutoGuard","lockItem","tabIndex","_interopRequireWildcard","_interopRequireDefault","Object","defineProperty","value","default","onFocus","onBlur","_toConsumableArray2","_reactClientsideEffect","_focusLock","_util","lastActiveTrap","lastActiveFocus","lastPortaledElement","focusWasOutsideWindow","defaultWhitelist","extractRef","ref","current","activateTrap","result","_lastActiveTrap","persistentFocus","autoFocus","shards","workingNode","observed","portaledElement","activeElement","document","workingArea","concat","map","filter","Boolean","whiteList","body","focusIsHidden","focusInside","blur","focus","newActiveElement","getFocusabledIn","focusedItem","find","_ref","_ref2","forEach","_ref3","removeAttribute","focusedIndex","indexOf","length","onTrap","event","stopPropagation","preventDefault","deferAction","source","target","currentNode","currentTarget","contains","observerNode","onWindowBlur","_default","reducePropsToState","propsList","_ref5","disabled","slice","handleStateChangeOnClient","trap","addEventListener","window","lastTrap","sameTrap","onActivation","onDeactivation","removeEventListener","FocusWatcher"]
}
