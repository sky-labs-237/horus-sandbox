{"version":3,"sources":["hx/react.cljs"],"mappings":";;;;;;AAOA,AAAKA,AAAWC;AAEhB,AAAA,AAAOC,AAAOC,AAAGC,AAAUC;AAA3B,AACE,AACE,AAAAC,AAAK,AAASH;AAAd,AAAA,AAAAG;AAAkBD;;AAAlBC;;;AAA0B,AAACC,AAAiBH;;AAD9C,AAGEC;AAAO,AAAA,AAACG,AAAiBJ;;AAH3B,AAAA;;;;;AAOF,AAAA,AAAOK,AAAaC,AAAOC,AAAYC;AAAvC,AACE;AAAOA;AAAP,AACE,AAAMC,AAAI,AAACC,AAAMH,AAAYC;AAA7B,AACE,AAAI,AAACG,AAAQF;AACX,AAACG,AAAmBH,AAAIH;;AACxBG;;;;AAJCD;;;;AAAAA;;AAAAA;;;AAAAA;AAAAA;;;;;;;AAMT,AAAA,AAAMK,AAAgBP,AAAOP,AAAGS;AAAhC,AAGG,AAAMR,AAEW,AAAA,AAAA,AAACc,AAAIN;AAChBP,AAAO,AAACc,AAAKf;AACbgB,AAEO,AAAClB,AAAMC,AAAGC,AAAUC;AAC3BgB,AAEU,AAAIhB,AAAO,AAACiB,AAAMV,AAAMA;AAClCD,AAEa,AAAA,AAAA,AAACO,AAAIG;AAZxB,AAaE,AAAAE,AAAM,AAACC,AAAMH;AAAb,AAAA,AAAAE;AAAA;AAGK,AAACE,AAAoBtB,AAAGiB;;;AAH7B;AAII,AAEK,AAAUM,AAAgBf;AAC7B,AAAAgB,AAAqBxB;AAArByB,AACqBR;AADrBS,AAIqB,AAACpB,AAAYC,AAAOC,AAAYC;AAJrD,AAAA,AAAAe,AAAAC,AAAAC,AAACJ;;AAOA,AAAAK,AAAqB3B;AAArB4B,AAAwBX;AAAxBY,AAE+B,AAAChB,AACAL,AAAYD;AAH5C,AAAA,AAAAoB,AAAAC,AAAAC,AAACP;;;;;AAOL,AAAA,AACCA,AAGC,AAAA,AAAOQ,AAAO9B,AAAGiB;AACVc,AAAEb;;AADT,AAEE,AAAA,AAAQ,AAAA,AAAMa;AACZ,AACE,AAAOD,AAAE,AAACjB,AACA,AAACmB,AAAOD,AAAGxB;;AACrB,AACCuB;AACA,AAACG,AAAMF;;;;;AACVD;;;;;;;;AAEd,AAAA,AAAA,AAAA,AAAA,AAAKI,AACcpB,AACHqB,AACHC;AAEb,AAAA,AAAMC,AAAGC;AAAT,AACE,AAACC,AAAaL,AAAoBI;;AAEpC,AAAA,AAAME,AAAYC;AAAlB,AACE,AAAI,AAAC7B,AAAQ6B;AACX,AAACJ,AAAEI;;AACHA;;;AAEJ,AAAKC,AAASN;AAEd,AAAA,AAACO,AAAsBD;AAEvB,AAAA,AAAA,AAAAE,AAAAC,AAAgBQ;AAAhB,AAAA,AAAAP,AAAA,AAAA,AAAAjD,AAAAA,AAAA+C,AAAA/C,AAAA+C,AAAAC;AAAAE,AAAA,AAAAhC,AAAA+B,AAAA,AAAA;AAAAC,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAAC,AAAA,AAAAD,AAAA,AAAA,AAAA,AAAA,AAAApC,AAAAsC,AAAAF,AAAAA;AAAA,AAAAG,AAAAH,AAAA,AAAkCO;AAAlC,AAAAJ,AAAAH,AAAA,AAA0CQ;AAA1C,AAAAL,AAAAH,AAAA,AAAgD7B;AAAhD,AAAA,AAAAsB,AAAA,AAAA,AAAA,AAAA,AACG,AAAgBc,AACRC,AACRrC;;;AAHH,AAAAiC;AAAA,AAAA,AAAAC,AAAA,AAAA,AAAgBC;;AAAhB;AAKA,AAAA,AAACV,AAA4BU;AAI7B,AAAA,AAAA,AAAAG,AAAMM;AAAN,AAAA,AAAAL,AAAA;AAAA,AAAA,AAAAC,AAAA,AAAA;AAAA,AAAA,AAAAC,AAAA;;AAAA,AAAA,AAAA,AAAAA,AAAAD;AAAA,AAAA,AAAAD,AAAA,AAAA,AAAAE;;AAAA,AAAA,AAAAA,AAAA;;;;AAAA;;;;AAAA,AAAAC,AAAA,AAAA,AAAA,AAAA,AAAAH,AAAA,AAAA,AAAAI,AAAA,AAAAJ,AAAA,AAAA,AAAA,AAAA;AAAA,AAAA,AAAAK,AAAA,AAAA,AAAA,AAAAF;;;AAAA,AAAA,AAAA,AAAA,AAAME,AAAG9D,AAAKS;AAAd,AAAoB,AAAC2D,AAAoBlC,AAAoBlC,AAAGS;;;AAAhE,AAAA,AAAA,AAAMqD;;AAAN;AAAA,AAAA,AAAA,AAAAC,AAAMD;AAAN,AAAA,AAAAE,AAAA,AAAAC,AAAAF;AAAAA,AAAA,AAAAG,AAAAH;AAAA,AAAA,AAAAI,AAAA;AAAA,AAAA,AAAAA,AAAAH,AAAAD;;;AAAA,AAEA,AAAA,AAAMM,AAAgBC,AAAMC;AAA5B,AACE,AAAAC,AAAA,AAAAC,AAAgCF;AAAhCG,AAAA;AAAAC,AAAA;AAAAC,AAAA;;AAAA,AAAA,AAAA,AAAA,AAAAA,AAAAD;AAAA,AAAAE,AAAA,AAAAH,AAAAE;AAAA,AAAA7D,AAAA8D,AAAA,AAAA,AAASO;AAAT,AAAArE,AAAA8D,AAAA,AAAA,AAAqBQ;AAArB,AAAA,AACE,AAAAC,AAAU,AAAahB;AAAvBiB,AACU,AAACK,AAAM,AAACC,AAAKT;AADvBI,AAEUH;AAFV,AAAA,AAAAC,AAAAC,AAAAC,AAACpC;;AADH;AAAA,AAAAoB;AAAAE;AAAAC;AAAA,AAAAC,AAAA;;;;;;;AAAA,AAAAE,AAAA,AAAAL,AAAAD;AAAA,AAAA,AAAAM;AAAA,AAAA,AAAAN,AAAAM;AAAA,AAAA,AAAA,AAAAC,AAAAP;AAAA,AAAAQ,AAAA,AAAAC,AAAAT;AAAA,AAAA,AAAA,AAAAU,AAAAV;AAAAQ;AAAA,AAAA3D,AAAA2D;AAAA;;;;;;;AAAA,AAAAG,AAAA,AAAAlB,AAAAO;AAAA,AAAAzD,AAAAoE,AAAA,AAAA,AAASC;AAAT,AAAArE,AAAAoE,AAAA,AAAA,AAAqBE;AAArB,AAAA,AACE,AAAAI,AAAU,AAAanB;AAAvBoB,AACU,AAACE,AAAM,AAACC,AAAKT;AADvBO,AAEUN;AAFV,AAAA,AAAAI,AAAAC,AAAAC,AAACvC;;AADH;AAAA,AAAA,AAAAc,AAAAM;AAAA;AAAA;AAAA;;;;;;;;AAAA;;;;;AAIAF;;AAEF,AAAA,AAAMwB,AAAcC,AAAYC,AAAQC,AAAkBC;AAA1D,AACE,AAAMC,AAAK,AAAKlF;AAAL,AACE,AAAA,AAASmF;AAAT,AAEE,AAAAC,AAAA,AAAA5B,AAAeyB;AAAfI,AAAA;AAAAC,AAAA;AAAAC,AAAA;;AAAA,AAAA,AAAA,AAAA,AAAAA,AAAAD;AAAA,AAAA,AAAAD,AAAAE,AAAQC;AAAR,AAAA,AACE,AAAAC,AAAUN;AAAVO,AAAe,AAACf,AAAMa;AAAtBG,AACU,AAAO,AAAAI,AAAUZ;AAAVa,AAAe,AAACrB,AAAMa;AAAtB,AAAA,AAAAO,AAAAC,AAACG;AAA8BhB;AADhD,AAAA,AAAAM,AAAAC,AAAAC,AAACxD;;AADH;AAAA,AAAAiD;AAAAC;AAAAC;AAAA,AAAAC,AAAA;;;;;;;AAAA,AAAA1B,AAAA,AAAAL,AAAA4B;AAAA,AAAA,AAAAvB;AAAA,AAAA,AAAAuB,AAAAvB;AAAA,AAAA,AAAA,AAAAC,AAAAsB;AAAA,AAAArB,AAAA,AAAAC,AAAAoB;AAAA,AAAA,AAAA,AAAAnB,AAAAmB;AAAArB;AAAA,AAAA3D,AAAA2D;AAAA;;;;;;;AAAA,AAAA,AAAAf,AAAAoC,AAAQI;AAAR,AAAA,AACE,AAAAI,AAAUT;AAAVU,AAAe,AAAClB,AAAMa;AAAtBM,AACU,AAAO,AAAAG,AAAUd;AAAVe,AAAe,AAACvB,AAAMa;AAAtB,AAAA,AAAAS,AAAAC,AAACC;AAA8BhB;AADhD,AAAA,AAAAS,AAAAC,AAAAC,AAAC3D;;AADH;AAAA,AAAA,AAAAc,AAAAmC;AAAA;AAAA;AAAA;;;;;;;;AAAA;;;;;AAIA,AAACL,AAAAA,AAAAA,AAAQI,AAAAA,AAAKnF,AAAAA;;AAP7B,AASE,AAACoG,AAAclB,AAAKJ;;AACpB,AAAAuB,AAAA,AAAA7C,AAAcwB;AAAdsB,AAAA;AAAAC,AAAA;AAAAC,AAAA;;AAAA,AAAA,AAAA,AAAA,AAAAA,AAAAD;AAAA,AAAAE,AAAA,AAAAH,AAAAE;AAAA,AAAA1G,AAAA2G,AAAA,AAAA,AAASE;AAAT,AAAA7G,AAAA2G,AAAA,AAAA,AAAWG;AAAX,AAAA,AACE,AAACzE,AAAS+C,AAAKyB,AAAEC;;AADnB;AAAA,AAAAP;AAAAC;AAAAC;AAAA,AAAAC,AAAA;;;;;;;AAAA,AAAA3C,AAAA,AAAAL,AAAA6C;AAAA,AAAA,AAAAxC;AAAA,AAAA,AAAAwC,AAAAxC;AAAA,AAAA,AAAA,AAAAC,AAAAuC;AAAA,AAAAtC,AAAA,AAAAC,AAAAqC;AAAA,AAAA,AAAA,AAAApC,AAAAoC;AAAAtC;AAAA,AAAA3D,AAAA2D;AAAA;;;;;;;AAAA,AAAA2C,AAAA,AAAA1D,AAAAqD;AAAA,AAAAvG,AAAA4G,AAAA,AAAA,AAASC;AAAT,AAAA7G,AAAA4G,AAAA,AAAA,AAAWE;AAAX,AAAA,AACE,AAACzE,AAAS+C,AAAKyB,AAAEC;;AADnB;AAAA,AAAA,AAAA3D,AAAAoD;AAAA;AAAA;AAAA;;;;;;;;AAAA;;;;;AAEAnB;;AAEJ,AAAA,AAAM2B,AAAkB9B,AAAQC,AAAkBC;AAAlD,AACE,AAACJ,AAAaiC,AAAgB/B,AAAQC,AAAkBC;;AAE1D,AAAA,AAAM8B,AAAuBhC,AAAQC,AAAkBC;AAAvD,AACE,AAACJ,AAAamC,AAAoBjC,AAAQC,AAAkBC;;AAE9D;;;AAAKgC,AAEHC;AAEF;;;;AAAA,AAAMC,AAGHC;AAHH,AAIE,AAACC,AAAQxE,AAAEuE","names":["hx.react/props->clj","hx.utils/props->clj","hx.react/props","el","first-arg","props?","and__4120__auto__","hx.utils.clj__GT_props.cljs$core$IFn$_invoke$arity$1","hx.utils.clj__GT_props.cljs$core$IFn$_invoke$arity$2","hx.react/fn-as-child","config","first-child","args","ret","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/vector?","hx.hiccup/-as-element","hx.react/create-element","cljs.core.nth.cljs$core$IFn$_invoke$arity$3","cljs.core/map?","props","children","cljs.core/-rest","G__26066","cljs.core/count","js/module$node_modules$react$index.createElement","goog/isFunction","G__26067","G__26068","G__26069","G__26070","G__26071","G__26072","a","c","cljs.core/-first","cljs.core/-next","hx.react/react-hiccup-config","js/module$node_modules$react$index.isValidElement","js/module$node_modules$react$index.Fragment","hx.react/f","form","hx.hiccup/parse","hx.react/parse-body","body","hx.react/fragment","hx.hiccup/extend-tag","props__26042__auto__","maybe-ref__26043__auto__","vec__26074","map__26077","cljs.core/PROTOCOL_SENTINEL","cljs.core/hash-map","cljs.core.get.cljs$core$IFn$_invoke$arity$2","goog/DEBUG","goog.object/set","hx.react/Provider","context","value","var_args","args__4736__auto__","len__4730__auto__","i__4731__auto__","argseq__4737__auto__","cljs.core/IndexedSeq","hx.react/$","seq26079","G__26080","cljs.core/first","cljs.core/next","self__4717__auto__","hx.hiccup/make-element","hx.react/assign-methods","class","method-map","seq__26081","cljs.core/seq","chunk__26082","count__26083","i__26084","vec__26097","temp__5735__auto__","cljs.core/chunked-seq?","c__4550__auto__","cljs.core/chunk-first","cljs.core/chunk-rest","vec__26103","method-name","method-fn","G__26100","G__26101","G__26102","G__26106","G__26107","G__26108","cljs.core/munge","cljs.core/name","hx.react/create-class","super-class","init-fn","static-properties","method-names","ctor","this","seq__26109","chunk__26110","count__26111","i__26112","method","G__26123","G__26124","G__26125","G__26128","G__26129","G__26130","G__26126","G__26127","G__26131","G__26132","goog.object/get","goog/inherits","seq__26133","chunk__26134","count__26135","i__26136","vec__26143","vec__26146","k","v","hx.react/create-component","js/module$node_modules$react$index.Component","hx.react/create-pure-component","js/module$node_modules$react$index.PureComponent","hx.react/create-context","js/module$node_modules$react$index.createContext","hx.react/factory","component","cljs.core.partial.cljs$core$IFn$_invoke$arity$2"],"sourcesContent":["(ns hx.react\n  (:require [goog.object :as gobj]\n            [\"react\" :as react]\n            [hx.hiccup :as hiccup]\n            [hx.utils :as utils :include-macros true])\n  (:require-macros [hx.react]))\n\n(def props->clj utils/props->clj)\n\n(defn- props [el first-arg props?]\n  (cond\n    (and (string? el) props?) (utils/clj->props first-arg)\n\n    props? (utils/clj->props first-arg false)\n\n    true nil))\n\n(defn- fn-as-child [config first-child args]\n  (fn [& args]\n    (let [ret (apply first-child args)]\n      (if (vector? ret)\n        (hiccup/-as-element ret config)\n        ret))))\n\n(defn create-element [config el args]\n  (utils/measure-perf\n   \"create_element\"\n   (let [first-arg (utils/measure-perf\n                    \"first-arg\"\n                    (nth args 0 nil))\n         props? (map? first-arg)\n         props (utils/measure-perf\n                \"props\"\n                (props el first-arg props?))\n         children (utils/measure-perf\n                   \"children\"\n                   (if props? (-rest args) args))\n         first-child (utils/measure-perf\n                      \"first-child\"\n                      (nth children 0 nil))]\n     (case (count children)\n       0 (utils/measure-perf\n          \"no_children\"\n          (react/createElement el props))\n       1 (if (utils/measure-perf\n              \"fn?\"\n              ^boolean (goog/isFunction first-child))\n           (react/createElement el\n                                props\n                                ;; fn-as-child\n                                ;; wrap in a function to parse hiccup from render-fn\n                                (fn-as-child config first-child args))\n           (utils/measure-perf\n            \"one_child\"\n            (react/createElement el props (utils/measure-perf\n                                           \"one_child_parse\"\n                                           (hiccup/-as-element\n                                            first-child config)))))\n       ;; use .apply here for performance\n       (utils/measure-perf\n        \"has_children\"\n        (.apply\n         react/createElement nil\n         (utils/measure-perf\n          \"children_parse_loop\"\n          (loop [a #js [el props]\n                 c children]\n            (if-not (nil? c)\n              (do\n                (.push a (hiccup/-as-element\n                          (-first c) config))\n                (recur\n                 a\n                 (-next c)))\n              a)))))))))\n\n(def react-hiccup-config\n  {:create-element create-element\n   :is-element? react/isValidElement\n   :fragment react/Fragment})\n\n(defn f [form]\n  (hiccup/parse react-hiccup-config form))\n\n(defn parse-body [body]\n  (if (vector? body)\n    (f body)\n    body))\n\n(def fragment react/Fragment)\n\n(hiccup/extend-tag :<> hx.react/fragment)\n\n(hx.react/defnc Provider [{:keys [context value children]}]\n  [(.-Provider ^js context)\n   {:value value}\n   children])\n\n(hiccup/extend-tag :provider Provider)\n\n\n\n(defn $ [el & args] (hiccup/make-element react-hiccup-config el args))\n\n(defn assign-methods [class method-map]\n  (doseq [[method-name method-fn] method-map]\n    (gobj/set (.-prototype class)\n              (munge (name method-name))\n              method-fn))\n  class)\n\n(defn create-class [super-class init-fn static-properties method-names]\n  (let [ctor (fn [props]\n               (this-as this\n                 ;; auto-bind methods\n                 (doseq [method method-names]\n                   (gobj/set this (munge method)\n                             (.bind (gobj/get this (munge method)) this)))\n\n                 (init-fn this props)))]\n    ;; set static properties on prototype\n    (goog/inherits ctor super-class)\n    (doseq [[k v] static-properties]\n      (gobj/set ctor k v))\n    ctor))\n\n(defn create-component [init-fn static-properties method-names]\n  (create-class react/Component init-fn static-properties method-names))\n\n(defn create-pure-component [init-fn static-properties method-names]\n  (create-class react/PureComponent init-fn static-properties method-names))\n\n(def create-context\n  \"Just react/createContext\"\n  react/createContext)\n\n(defn factory\n  \"Takes a React component, and creates a function that returns\n  a new React element\"\n  [component]\n  (partial $ component))\n"]}